# streamlit_dashboard.py
import streamlit as st
import pandas as pd
import plotly.express as px

# -------------------------------
# 1. ì œëª©ê³¼ ì„¤ëª…
# -------------------------------
st.title("ğŸ“Š ë°ì´í„° ì‹œê°í™” ëŒ€ì‹œë³´ë“œ")
st.markdown("CSV íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³ , ë°ì´í„°ë¥¼ ì‹œê°í™”í•´ë³´ì„¸ìš”!")

# -------------------------------
# 2. ë°ì´í„° ì—…ë¡œë“œ
# -------------------------------
uploaded_file = st.file_uploader("CSV íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”", type=["csv"])

if uploaded_file is not None:
    df = pd.read_csv(uploaded_file)
    st.write("ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°:")
    st.dataframe(df)

    # -------------------------------
    # 3. ì‹œê°í™” ì˜µì…˜ ì„ íƒ
    # -------------------------------
    st.sidebar.header("ì‹œê°í™” ì˜µì…˜")
    chart_type = st.sidebar.selectbox("ì°¨íŠ¸ ìœ í˜• ì„ íƒ", ["ë§‰ëŒ€ ê·¸ë˜í”„", "ì„  ê·¸ë˜í”„", "ì‚°ì ë„"])
    x_axis = st.sidebar.selectbox("Xì¶• ë³€ìˆ˜ ì„ íƒ", df.columns)
    y_axis = st.sidebar.selectbox("Yì¶• ë³€ìˆ˜ ì„ íƒ", df.columns)

    # -------------------------------
    # 4. ì‹œê°í™” ì¶œë ¥
    # -------------------------------
    if chart_type == "ë§‰ëŒ€ ê·¸ë˜í”„":
        fig = px.bar(df, x=x_axis, y=y_axis)
    elif chart_type == "ì„  ê·¸ë˜í”„":
        fig = px.line(df, x=x_axis, y=y_axis)
    elif chart_type == "ì‚°ì ë„":
        fig = px.scatter(df, x=x_axis, y=y_axis)

    st.plotly_chart(fig, use_container_width=True)
else:
    st.info("CSV íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ ì‹œê°í™” ì˜µì…˜ì´ í‘œì‹œë©ë‹ˆë‹¤.")
